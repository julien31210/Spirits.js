'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = loadScript;

var _context = require('./context');

/**
 * Load script into web page context
 * .
 * @param   {string} src script source
 * @returns {Promise}
 */
function loadScript(src) {
  if (!(0, _context.isBrowser)()) {
    return Promise.reject(new Error('Script can only be loaded in browser: ' + src));
  }

  return new Promise(function (resolve, reject) {
    var s = document.createElement('script');
    s.src = src;
    s.async = true;

    s.onload = function () {
      document.body.removeChild(s);
      resolve();
    };

    s.onerror = function () {
      document.body.removeChild(s);
      reject(new Error('Could not load script ' + src));
    };

    document.body.appendChild(s);
  });
}
module.exports = exports['default'];